(this["webpackJsonpamazon-clone"]=this["webpackJsonpamazon-clone"]||[]).push([[0],{101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},109:function(e,t,c){"use strict";c.r(t);var n=c(7),a=c.n(n),s=c(59),r=c.n(s),i=(c(74),c(60)),o=c(14),l=(c(53),c(75),c(62)),d=c.n(l),j=c(63),u=c.n(j),b=c(27),h=c(4),O=Object(n.createContext)(),x=function(e){var t=e.reducer,c=e.initialState,a=e.children;return Object(h.jsx)(O.Provider,{value:Object(n.useReducer)(t,c),children:a})},p=function(){return Object(n.useContext)(O)},m=c(50),f=(c(78),c(111),m.a.initializeApp({apiKey:"AIzaSyBOQsuae5fJ5nt3RunbyWoCLvImlr-dsyo",authDomain:"clone-20772.firebaseapp.com",projectId:"clone-20772",storageBucket:"clone-20772.appspot.com",messagingSenderId:"296246562163",appId:"1:296246562163:web:200d74dcb8d5e1eb9c0906",measurementId:"G-Y551EKEQ8R"}).firestore()),_=m.a.auth();var g=function(){var e,t,c=p(),n=Object(o.a)(c,2),a=n[0],s=a.basket,r=a.user,i=(n[1],null===r||void 0===r||null===(e=r.email)||void 0===e?void 0:e.substring(0,null===r||void 0===r||null===(t=r.email)||void 0===t?void 0:t.lastIndexOf("@")));return Object(h.jsx)("header",{children:Object(h.jsx)("div",{className:"header",children:Object(h.jsxs)("section",{className:"container flex justify__space__between align-items-center",children:[Object(h.jsx)(b.b,{to:"/",children:Object(h.jsx)("img",{src:"/images/amazon_logo.png",alt:"Brand Logo",className:"header__logo brand"})}),Object(h.jsxs)("div",{className:"header__search",children:[Object(h.jsx)("input",{type:"text",className:"header__searchInput"}),Object(h.jsx)(d.a,{className:"header__searchIcon"})]}),Object(h.jsx)("input",{id:"toggle",type:"checkbox"}),Object(h.jsx)("label",{className:"bars",htmlFor:"toggle",children:Object(h.jsx)("i",{class:"fas fa-bars"})}),Object(h.jsxs)("nav",{className:"header__nav nav__bar flex justify__space__between",children:[Object(h.jsx)(b.b,{to:!r&&"/authenticate",children:Object(h.jsxs)("div",{onClick:function(){r&&_.signOut()},className:"header__option",children:[Object(h.jsxs)("span",{className:"header__optionLineOne",children:["Hello",r?" ".concat(i):" Guest"]}),Object(h.jsx)("span",{className:"header__optionLineTwo",children:r?"Sign Out":"Sign In"})]})}),Object(h.jsx)(b.b,{to:"/orders",children:Object(h.jsx)("div",{className:"header__option",children:Object(h.jsx)("span",{className:"header__optionLineTwo",children:"Orders"})})})]}),Object(h.jsx)(b.b,{to:"/checkout",children:Object(h.jsxs)("div",{className:"header__optionBasket flex-column",children:[Object(h.jsx)("span",{className:"header__optionLineTwo header__basketCount",children:null===s||void 0===s?void 0:s.length}),Object(h.jsxs)("div",{className:"flex cart__design",children:[Object(h.jsx)(u.a,{className:"header__shoppingIcon"}),Object(h.jsx)("p",{children:"Cart"})]})]})})]})})})},v=c(0),N=c.n(v),k=c(1),y=c(2),S=c(3),B=c(11),C=c(12),w=(c(88),c(89),c(64));var E=function(e){var t=e.title,c=e.image,n=e.price,a=e.rating,s=p(),r=Object(o.a)(s,2),i=(r[0].basket,r[1]);return a=Math.floor(a),Object(h.jsxs)("article",{className:"product flex__20",children:[Object(h.jsxs)("section",{className:"productInfo",children:[Object(h.jsx)("p",{className:"product__title",children:t}),Object(h.jsxs)("p",{className:"product__price",children:[Object(h.jsx)("small",{children:"$ "}),Object(h.jsx)("strong",{children:n})]}),Object(h.jsx)("div",{className:"product__rating",children:Array(a).fill().map((function(e){return Object(h.jsx)("p",{children:"\u2b50"})}))})]}),Object(h.jsx)("img",{src:c,alt:"intelligent investor book cover page"}),Object(h.jsx)("button",{onClick:function(){i({type:"ADD_TO_BASKET",item:{id:Object(w.v4)(),title:t,image:c,price:n,rating:a}})},children:"Add to Cart"})]})};c(92);var A=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{class:"loader",children:"Loading..."})})},T=[{image:"./images/banner__2.jpg"},{image:"./images/banner__3.jpg"},{image:"./images/banner__4.jpg"},{image:"./images/banner__5.jpg"}],P=(c(93),function(e){var t=e.slides,c=Object(n.useState)(0),a=Object(o.a)(c,2),s=a[0],r=a[1],i=t.length;return!Array.isArray(t)||t.length<=0?null:Object(h.jsxs)("section",{className:"slider",children:[Object(h.jsx)("i",{class:"fas fa-chevron-left",onClick:function(){r(0===s?i-1:s-1)}}),Object(h.jsx)("i",{class:"fas fa-chevron-right",onClick:function(){r(s===i-1?0:s+1)}}),T.map((function(e,t){return Object(h.jsx)("div",{className:t===s?"slide active":"slide",children:t===s&&Object(h.jsx)("img",{src:e.image,alt:"travel",className:"image hero__image"})},t)}))]})});var I=c(94).uuid;console.log((window.onload=Object(k.a)(N.a.mark((function e(){var t,c,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 2:return t=e.sent,e.abrupt("return",{long:t.coords.longitude,lat:t.coords.latitude});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,t();case 3:return c=e.sent,console.log(c),e.next=7,fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(c.lat,"+").concat(c.long,"&key=06494d00ff484eb2a15690fc4fa67e9a")).then((function(e){return e.json()}));case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))))());var D=function(e){Object(B.a)(c,e);var t=Object(C.a)(c);function c(){var e;return Object(y.a)(this,c),(e=t.call(this)).state={data:null,location:null},e}return Object(S.a)(c,[{key:"componentDidMount",value:function(){var e=Object(k.a)(N.a.mark((function e(){var t=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fakestoreapi.com/products").then((function(e){return e.json()})).then((function(e){return t.setState({data:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return Object(h.jsx)("main",{children:Object(h.jsx)("section",{className:"home hero__section",children:Object(h.jsxs)("div",{className:"home__container",children:[Object(h.jsx)(P,{slides:T}),Object(h.jsx)("section",{className:"products__section",children:Object(h.jsx)("div",{className:"home__row",children:this.state.data?null===(e=this.state.data)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(E,{className:"flex__20",id:I(),title:e.title,price:e.price,image:e.image,rating:e.rating.rate})})):Object(h.jsx)(A,{})})})]})})})}}]),c}(a.a.Component),R=c(20),L=(c(98),c(99),c(36)),M=c.n(L);var z=function(){var e=Object(R.f)(),t=p(),c=Object(o.a)(t,2),n=c[0].basket;return c[1],Object(h.jsxs)("section",{className:"subtotal",children:[Object(h.jsx)(M.a,{renderText:function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Subtotal (",n.length," items): ",Object(h.jsx)("strong",{children:e})]}),Object(h.jsxs)("small",{className:"subtotal__gift",children:[Object(h.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)}(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(h.jsx)("button",{onClick:function(t){return e.push("/payment")},children:"Proceed to CheckOut"})]})};c(101);var F=function(e){var t=e.id,c=e.image,n=e.title,a=e.price,s=e.rating,r=(e.hideButton,p()),i=Object(o.a)(r,2),l=(i[0].basket,i[1]);return Object(h.jsxs)("section",{className:"shoppingBasketProduct",children:[Object(h.jsx)("img",{className:"shoppingBasketProduct__image",src:c,alt:"product title"}),Object(h.jsxs)("article",{className:"shoppingBasketProduct__info",children:[Object(h.jsx)("p",{className:"shoppingBasketProduct__title",children:n}),Object(h.jsxs)("p",{className:"shoppingBasketProduct__price",children:[Object(h.jsx)("small",{children:"$"}),Object(h.jsx)("strong",{children:a})]}),Object(h.jsx)("div",{className:"shoppingBasketProduct__rating",children:Array(s).fill().map((function(e){return Object(h.jsx)("p",{children:"\u2b50"})}))}),Object(h.jsx)("button",{className:"order__total__show",onClick:function(){console.log("clicked"),l({type:"REMOVE_FROM_BASKET",id:t})},children:"Delete from Cart"})]})]})};var U=function(){var e=p(),t=Object(o.a)(e,2),c=t[0],n=c.basket,a=c.user;return t[1],Object(h.jsxs)("section",{className:"checkout column",children:[Object(h.jsxs)("article",{className:"checkout__left",children:[Object(h.jsx)("img",{className:"checkout__BannerAdd",src:"./images/ILB_BrightColors.jpg",alt:"amazon banner"}),Object(h.jsxs)("div",{className:"shoppingBasket__interface",children:[Object(h.jsxs)("h3",{children:["Hello, ",null===a||void 0===a?void 0:a.email]}),Object(h.jsx)("h2",{className:"checkout__title",children:"Your Shopping Basket"}),n.map((function(e){return Object(h.jsx)(F,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))]})]}),Object(h.jsx)("aside",{className:"checkout__title",children:Object(h.jsx)(z,{})})]})};c(102);var Y=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],d=Object(R.f)();return Object(h.jsxs)("section",{className:"login",children:[Object(h.jsx)(b.b,{to:"/",children:Object(h.jsx)("img",{className:"login__logo",src:"./images/amazon_logo_dark.png",alt:"amazon logo dark"})}),Object(h.jsxs)("div",{className:"login__container",children:[Object(h.jsxs)("form",{children:[Object(h.jsx)("legend",{children:"Sign-in / Register"}),Object(h.jsx)("label",{children:"E-mail"}),Object(h.jsx)("input",{type:"text",value:c,onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),_.signInWithEmailAndPassword(c,i).then((function(e){d.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton",children:"Sign In"})]}),Object(h.jsx)("p",{children:"By signing-in you agree to the AMAZON CLONE Conditions of Use & Sale. Please be sure that orders on this website are not real , You may loose money, Order it on your own risk."}),Object(h.jsx)("button",{onClick:function(e){e.preventDefault(),_.createUserWithEmailAndPassword(c,i).then((function(e){console.log(e),e&&d.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__registerButton",children:"Create your Amazon Account"})]})]})},q=(c(103),c(104),c(65)),J=c.n(q);c(106);var K=function(e){e.id;var t=e.image,c=e.title,n=e.price,a=e.rating,s=(e.hideButton,p()),r=Object(o.a)(s,2);return r[0].basket,r[1],Object(h.jsxs)("section",{className:"orderedBasketProduct",children:[Object(h.jsx)("img",{className:"orderedBasketProduct__image",src:t,alt:"product title"}),Object(h.jsxs)("article",{className:"orderedBasketProduct__info",children:[Object(h.jsx)("p",{className:"orderedBasketProduct__title",children:c}),Object(h.jsxs)("p",{className:"orderedBasketProduct__price",children:[Object(h.jsx)("small",{children:"$"}),Object(h.jsx)("strong",{children:n})]}),Object(h.jsx)("div",{className:"orderedBasketProduct__rating",children:Array(a).fill().map((function(e){return Object(h.jsx)("p",{children:"\u2b50"})}))})]})]})};var $=function(e){var t,c=e.order;return J.a.unix(c.data.created).format("MMMM Do YYYY, hh:mm"),console.log(c),Object(h.jsxs)("div",{className:"order",children:[Object(h.jsx)("h2",{children:"Order Number"}),Object(h.jsx)("p",{}),Object(h.jsx)("p",{className:"order__id",children:Object(h.jsx)("small",{children:c.id})}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(K,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})})),Object(h.jsx)(M.a,{renderText:function(e){return Object(h.jsxs)("h3",{className:"order__total",children:["Order Total: ",Object(h.jsx)("span",{children:e})]})},decimalScale:2,value:c.data.amount,displayType:"text",thousandSeparator:!0,prefix:"$"})]})};var H=function(){var e=p(),t=Object(o.a)(e,2),c=t[0],a=(c.basket,c.user),s=(t[1],Object(n.useState)([])),r=Object(o.a)(s,2),i=r[0],l=r[1];return Object(n.useEffect)((function(){if(a){var e=f.collection("users").doc(null===a||void 0===a?void 0:a.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));console.log(e)}else l([])}),[a]),Object(h.jsxs)("div",{className:"orders",children:[Object(h.jsx)("h1",{children:"Your Orders"}),Object(h.jsx)("div",{className:"orders__order",children:null===i||void 0===i?void 0:i.map((function(e){return Object(h.jsx)($,{order:e})}))})]})},Q=(c(107),c(18));function W(){var e=Object(n.useRef)(),t=(Object(R.f)(),p()),c=Object(o.a)(t,2),a=c[0],s=a.basket,r=a.user;c[1];console.log("this is the basket",s);var i=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)};return console.log("payment",i(s)),Object(n.useEffect)((function(){window.paypal.Buttons({createOrder:function(e,t,c){return t.order.create({intent:"CAPTURE",purchase_units:[{description:"order details",amount:{currency_code:"USD",value:i(s)}}]})},onApprove:function(){var e=Object(k.a)(N.a.mark((function e(t,c){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.order.capture().then((function(e){return e}));case 2:if(n=e.sent,console.log("orders",n),"COMPLETED"!==n.status){e.next=8;break}return e.next=7,f.collection("users").doc(null===r||void 0===r?void 0:r.uid).collection("orders").doc(n.id).set({basket:Object(Q.a)(s),amount:n.purchase_units[0].amount.value,created:n.create_time});case 7:window.location.replace("https://clone-20772.web.app/orders");case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),onError:function(e){console.log(e)}}).render(e.current)}),[]),Object(h.jsx)("div",{children:Object(h.jsx)("div",{ref:e})})}var V=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(h.jsx)("div",{className:"App",children:c?Object(h.jsx)(W,{}):Object(h.jsx)("button",{onClick:function(){a(!0)},children:"Checkout"})})};var G=function(){var e=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)};console.log("xxxxxxxxxxx",e());var t=p(),c=Object(o.a)(t,2),n=c[0],a=n.basket,s=n.user;return c[1],console.log("xxxxxxxxxxx",e(a)),Object(h.jsx)("div",{className:"payment",children:Object(h.jsxs)("div",{className:"payment__container",children:[Object(h.jsxs)("h1",{children:["Checkout ( ",Object(h.jsxs)(b.b,{to:"/checkout",children:[null===a||void 0===a?void 0:a.length," items"]}),")"]}),Object(h.jsxs)("div",{className:"payment__section",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Delivery Address"})}),Object(h.jsxs)("div",{className:"payment__address",children:[Object(h.jsx)("p",{children:null===s||void 0===s?void 0:s.email}),Object(h.jsx)("p",{contenteditable:"true",children:"Room No : 2-123"}),Object(h.jsx)("p",{contenteditable:"true",children:"AltCampus, Dharamshala"})]})]}),Object(h.jsxs)("div",{className:"payment__section",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Review items and delivery"})}),Object(h.jsx)("div",{className:"payment__items",children:a.map((function(e){return Object(h.jsx)(F,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))})]}),Object(h.jsxs)("div",{className:"payment__section",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Payment Method"})}),Object(h.jsxs)("div",{className:"payment__details",children:[Object(h.jsx)(M.a,{renderText:function(e){return Object(h.jsxs)("h3",{children:["Order Total: ",e]})},decimalScale:2,value:e(a),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(h.jsx)(V,{})]})]})]})})},X=c(66),Z=c(67),ee=Object(X.a)("pk_test_51Jbx3VSBhNBa2qOqC16JNBr7lxu5uqBX246qt6ppx93eOLq1B8DFLutXSH0Q0m5mxUJaThSEsyWevAj10Hz8TQYh00mxInazqu");var te=function(){var e=p(),t=Object(o.a)(e,2);Object(i.a)(t[0]);var c=t[1];return Object(n.useEffect)((function(){_.onAuthStateChanged((function(e){console.log("THE USER IS",e),c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),Object(h.jsx)(b.a,{children:Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(R.c,{children:[Object(h.jsxs)(R.a,{path:"/orders",children:[Object(h.jsx)(g,{}),Object(h.jsx)(H,{})]}),Object(h.jsx)(R.a,{path:"/Authenticate",children:Object(h.jsx)(Y,{})}),Object(h.jsxs)(R.a,{path:"/checkout",children:[Object(h.jsx)(g,{}),Object(h.jsx)(U,{})]}),Object(h.jsxs)(R.a,{path:"/payment",children:[Object(h.jsx)(g,{}),Object(h.jsx)(Z.Elements,{stripe:ee,children:Object(h.jsx)(G,{})})]}),Object(h.jsxs)(R.a,{path:"/",children:[Object(h.jsx)(g,{}),Object(h.jsx)(D,{})]})]})})})},ce=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,118)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))},ne=c(33),ae=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(ne.a)(Object(ne.a)({},e),{},{basket:[].concat(Object(Q.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var c=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(Q.a)(e.basket);return c>=0&&n.splice(c,1),Object(ne.a)(Object(ne.a)({},e),{},{basket:n});case"SET_USER":return Object(ne.a)(Object(ne.a)({},e),{},{user:t.user});default:return e}};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(x,{initialState:{basket:[]},reducer:ae,children:Object(h.jsx)(te,{})})}),document.getElementById("root")),ce()},53:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[109,1,2]]]);
//# sourceMappingURL=main.33ffefe7.chunk.js.map